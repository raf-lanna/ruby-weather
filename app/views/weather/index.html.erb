<div class="weather-landing">
  <section class="weather-hero">
    <p class="weather-hero__badge">Powered by WeatherAPI.com</p>
    <h1>Check the latest conditions in seconds</h1>
    <p class="weather-hero__lead">
      Enter any valid US ZIP code or city name to view live conditions including temperature, wind, humidity, and more â€” refreshed directly from WeatherAPI.com.
    </p>

    <ul class="weather-hero__highlights">
      <li>Real-time data updated every few minutes</li>
      <li>Temperature available in Celsius and Fahrenheit</li>
      <li>Includes wind, visibility, UV index, and precipitation</li>
    </ul>
  </section>

  <section class="weather-form-card">
    <h2>Search by ZIP code or city</h2>
    <p class="weather-form-card__hint">Enter a US ZIP code (12345 or 12345-6789) or the name of a city recognized by WeatherAPI.</p>

    <%= form_with url: weather_forecast_path, method: :get, local: true, data: { controller: "weather-form", action: "submit->weather-form#validate" }, html: { class: "zip-form" } do |form| %>
      <div class="zip-form__group">
        <%= form.label :zip_code, "US ZIP code", class: "zip-form__label" %>
        <div class="zip-form__input-wrap">
          <%= form.text_field :zip_code,
                              placeholder: "e.g. 90001 or 94105-1234",
                              value: @zip_code,
                              inputmode: "numeric",
                              class: "zip-form__input",
                              data: { "weather-form-target": "zip", action: "input->weather-form#formatZip input->weather-form#onInput keyup->weather-form#formatZip blur->weather-form#formatZip" } %>
          <button type="submit" class="zip-form__submit">Check weather</button>
        </div>
      </div>

      <div class="zip-form__group">
        <%= form.label :city, "City name", class: "zip-form__label" %>
        <div class="zip-form__input-wrap zip-form__input-wrap--text">
          <%= form.text_field :city,
                              placeholder: "e.g. Los Angeles, CA",
                              value: @city,
                              class: "zip-form__input zip-form__input--text",
                              data: { "weather-form-target": "city", action: "input->weather-form#onInput" } %>
          <button type="submit" class="zip-form__submit zip-form__submit--secondary">Check weather</button>
        </div>
      </div>

      <div class="zip-form__group">
        <span class="zip-form__label">Forecast day (up to 5 days)</span>
        <% selected_offset = (@days || 0).to_i.clamp(0, 5) %>
        <div class="zip-form__calendar" data-weather-form-target="dayList">
          <% 0.upto(5) do |offset| %>
            <% date = Time.zone.today + offset.days %>
            <% caption = case offset
                        when 0 then "Today"
                        when 1 then "Tomorrow"
                        else "#{offset} days ahead"
                        end %>
            <label class="zip-form__day-option <%= 'zip-form__day-option--selected' if selected_offset == offset %>" data-weather-form-target="dayOption">
              <%= form.radio_button :days, offset, checked: selected_offset == offset, class: "zip-form__day-input", data: { action: "change->weather-form#selectDay" } %>
              <span class="zip-form__day-date"><%= date.strftime("%b %d") %></span>
              <span class="zip-form__day-caption"><%= caption %></span>
            </label>
          <% end %>
        </div>
      </div>

      <p class="zip-form__notice">We send the city or ZIP code you provide directly to WeatherAPI.com and do not store it.</p>
    <% end %>
  </section>
</div>
